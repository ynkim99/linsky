<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
	<meta charset="UTF-8">
	<title>Linksy</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
	<link rel="stylesheet" href="/css/main.css">
	<link rel="stylesheet" href="/css/menubar.css">
</head>
<body>
	<div class="main">
		<!-- 메뉴 바-->
		<section class="left" th:replace="~{menu_bar :: menu_bar}">
		</section>
		<section class="center">
			<div th:each="feed : ${feeds}">
				<!-- 피드 전체를 감싸는 div에 data-feed-id 추가 -->
				<div class="feeds-container" th:data-feed-id="${feed.feedId}">
					<!--  게시물 상단 - 사용자 정보 -->
					<div class="feed-header">
						<img th:src="@{/images/profile/{img}(img=${feed.member.userImg})}" alt="프로필 사진" class="profile-img">
						<span class="username" th:text="${feed.member.userNickname}"></span>
					</div>
					<!-- 게시물 이미지 -->
					<div class="feed-image">
						<img th:src="@{/images/feeds/{img}(img=${feed.feedImage.imgName})}" alt="게시물 사진">
					</div>
					<!-- 게시물 하단 - 좋아요 및 댓글 -->
					<div class="feed-footer">
						<div class="feed-actions-likes">
							<div class="feed-actions">
								<i class="bi bi-heart"></i>
							</div>
							<div class="likes" th:text="'좋아요 ' + ${feed.likeAmount} + '개'">
							</div>
						</div>
						<div class="feed-caption">
							<span class="username" th:text="${feed.member.userNickname}"></span>
							<span class="caption-text" th:attr="data-full-text=${feed.feedContent}" 
									th:text="${#strings.abbreviate(feed.feedContent, 15)}"></span>
							<span class="read-more"  th:if="${feed.feedContent.length() > 15}"  
									onclick="toggleCaption(this)">더보기</span>
						</div>
						<!-- 댓글 n개 보기 -->
						<div class="comments-view">
							<span class="view-comments" onclick="showComments(this)"
								th:text="'댓글 ' + ${feed.comments.size()} + '개'">
							</span>
							<div class="comments-list">
								<!-- 댓글 리스트 출력-->
								<div class="comment-item" th:each="comment : ${feed.comments}">
									<strong th:text="${comment.member.userNickname}"></strong>: 
									<span th:text="${comment.commentContent}"></span>
								</div>
							</div>
						</div>
						<!-- 댓글 입력 -->
						<div class="comment-input">
							<input type="text" placeholder="댓글 달기..." />
							<button>게시</button>
						</div>
					</div>
				</div>
			</div>	
		</section>
		<!-- 오른쪽 계정 및 친구-->
		<section class="right">
			<div class="user-profile">
				<img th:src="${member.userImg}" alt="프로필 사진" class="my-profile">
			    <div class="user-info"> 
			        <span class="my-username" th:text="${member.userNickname}"></span>
			        <span class="my-user-description" th:text="${member.userIntroduce}"></span>
			    </div>
			</div>
			<!-- 친구 섹션 제목 -->
			<div class="friends-title">
				<span>친구</span>
				<hr />
			</div>
			<div class="friends">
				<div class="friend">
					<img src="/images/logo/1.png" alt="친구 사진" class="profile-img">
					<div class="user-info">
						<span class="username">make_it_work</span>
						<span class="user-description">Instagram 신규 사용자</span>
					</div>
				</div>
				<div class="friend">
					<img src="/images/logo/1.png" alt="친구 사진" class="profile-img">
					<div class="user-info">
						<span class="username">dkc_mall</span>
						<span class="user-description">가방 전문 쇼핑몰</span>
					</div>
				</div>
			</div>	
		</section>
	</div>
</body>
<script src="/js/main.js"></script>
</html>